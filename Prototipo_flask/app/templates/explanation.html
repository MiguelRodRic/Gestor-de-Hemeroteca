{% extends "base.html" %}
{% block content %}
    <script src={{url_for('static', filename='Chart.min.js')}}></script>
    <h1 style="font-family: 'Arimo', sans-serif">Explicación de predicción: </h1>
    <form action="/explanation" method="post" name="explanation">
    
    {% if resultHTML %}
    <h2> Dataset: {{ dataset }} </h2>
    <h3> Explicación de la predicción </h3>
    <div>
    <canvas id="chart" width="600" height="400"></canvas> 
    </div>
    <div>
    {{ resultHTML }}
    </div>
  	{% endif %}
    <div>
    <a  class="link" href="/index"> Cancelar </a>&nbsp;
    <input type="submit" name="submit" value="Guardar Predicción">
    </div>
    </form>
    <script type="text/javascript">
        var barData = {
         labels : [{% for label in resultsList.etiquetas %}
                        "{{label}}",
                    {% endfor %}],
         datasets : [
            {
                  fillColor: "rgba(151,187,205,0.2)",
                  strokeColor: "rgba(151,187,205,1)",
                  pointColor: "rgba(151,187,205,1)",
               data : [{% for item in resultsList.importancias %}
                            {{item}},
                          {% endfor %}]
            }
            ]
        }
       
         // get bar chart canvas
        var mychart = document.getElementById("chart").getContext("2d");
       
        steps = 10
        max = 0.5
         // draw bar chart
        var newChart = new Chart(mychart)
        newChart.Bar(barData, {
              scaleOverride: true,
              scaleSteps: steps,
              scaleStepWidth: 0.01,
              scaleStartValue: 0,
              scaleShowVerticalLines: true,
              scaleShowGridLines : true,
              barShowStroke : true,
              scaleShowLabels: true
        });
    </script>
{% endblock %}